<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>DESAFIO 2 - CICLOS Y FUNCIONES JAVASCRIPT (RAMON VASQUEZ)</title>
        <style type="text/css">
            body{color:navy; background-color:lightgray;}
            p{font-family: Arial, Helvetica, sans-serif;}
            td{text-align: center;}
            div {border-style:double;}
            #formulario{height: 550px; width: 300px;}
            #informacion{height: 250px; width: 300px;}
            #parrafo{font-weight: bold;}
        </style>
    </head>
    <script>
        function textoResaltado(campo){
            document.getElementById(campo).setAttribute('style', 'color: red');
            document.getElementById(campo).placeholder = "Campo Vacio o Erroneo";
            alert('ERROR DE INGRESO, VOLVER A INGRESAR DATOS SOLICITADOS')
        }

        function reemplazoTexto(){
            var parrafo = "Estimado(a) nombre y apellido, su hora para especialidad ha sido reservada para el día fecha a las horas. Además, se le envió un mensaje a su correo email con el detalle de su cita. Gracias por preferirnos.";
            parrafo = parrafo.replace("nombre y apellido",document.getElementById("nombre").value+" "+document.getElementById("apellido").value);
            parrafo = parrafo.replace("especialidad",document.getElementById("especialidad").value);
            parrafo = parrafo.replace("fecha",document.getElementById("fecha").value);
            parrafo = parrafo.replace("horas",document.getElementById("hora").value);
            parrafo = parrafo.replace("email",document.getElementById("email").value);
            document.getElementById("parrafo").innerHTML = parrafo;
        }

        function validaRut(){
            const rut = document.getElementById("rut").value;
            const patron = /^0*(\d{1,3}(\.?\d{3})*)\-?([\dkK])$/gim;
            if(!rut.match(patron)){
                textoResaltado("rut");
            }
        }

        function validaNombreApellido(){
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const patron =  /[a-zA-Z]/gim;
            if(!nombre.match(patron) || !apellido.match(patron)){
                textoResaltado("nombre");
                textoResaltado("apellido");
            }
        }

        function validaEdad(){
            const edad = document.getElementById("edad").value;
            const patron = /[0-9]/gim;
            if(!edad.match(patron)){
                textoResaltado("edad");
            }
        }

        function validaEmail(){
            const email = document.getElementById("email").value;
            const patron = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.([a-zA-Z]{2,4})+$/gim;
            if(!email.match(patron)){
                textoResaltado("email");
            }
        }

        function validaFecha(){
            const fecha = document.getElementById("fecha").value;
            const patron = /^(?:3[01]|[12][0-9]|0?[1-9])([\-/.])(0?[1-9]|1[1-2])\1\d{4}$/gim
            if(!fecha.match(patron)){
                textoResaltado("fecha");
            }
        }

        function alBoton(){
            btnReservar.addEventListener("click", validaRut);
            btnReservar.addEventListener("click", validaNombreApellido);
            btnReservar.addEventListener("click", validaEdad);
            btnReservar.addEventListener("click", validaEmail);
            btnReservar.addEventListener("click", validaFecha);
            btnReservar.addEventListener("click",reemplazoTexto);
        }
    </script>
    <body>
        <center>
            <div id="formulario">
                <p>..::RESERVA DE HORAS::..</p>
                <table>
                    <tr>
                        <td><p>RUT: </p></td>
                        <td><input type="text" id="rut" name="rut" placeholder="00.000.000-X"/></td>
                    </tr>
                    <tr>
                        <td><p>Nombre: </p></td>
                        <td><input type="text" id="nombre" name="nombre" placeholder="Ingrese Letras"/></td>
                    </tr>
                    <tr>
                        <td><p>Apellido: </p></td>
                        <td><input type="text" id="apellido" name="apellido" placeholder="Ingrese Letras"/></td>
                    </tr>
                    <tr>
                        <td><p>Edad: </p></td>
                        <td><input type="text" id="edad" name="edad" placeholder="Ingrese Numeros"/></td>
                    </tr>
                    <tr>
                        <td><p>Email: </p></td>
                        <td><input type="text" id="email" name="email" placeholder="correo@dominio.xxx"/></td>
                    </tr>
                    <tr>
                        <td><p>Especialidad: </p></td>
                        <td><input type="text" id="especialidad" name="especialidad" placeholder="Ingrese Especialidad"/></td>
                    </tr>
                    <tr>
                        <td><p>Fecha: </p></td>
                        <td><input type="text" id="fecha" name="fecha" placeholder="Ingrese dia-mes-año"/></td>
                    </tr>
                    <tr>
                        <td><p>Hora: </p></td>
                        <td><input type="text" id="hora" name="hora" placeholder="Ingrese Hora:Minutos"/></td>
                    </tr>
                    <tr>
                        <td colspan="2"><input type="button" value="RESERVAR" id="btnReservar" onclick="alBoton()"></td>
                    </tr>
                </table>
            </div>
            <br><br>
            <div id="informacion">
                <p>..::INFORMACION DE RESERVA::..</p>
                <p id="parrafo">
  
                </p>
            </div>
        </center>
    </body>
</html>